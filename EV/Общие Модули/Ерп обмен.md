## Функция СоздатьПроизводствоБезЗаказа(Номенклатура,Количество,Автор,Дата,Признак,ЗаказКлиента="",Склад="",Комментарий = "",Idzak = "") Экспорт      

Создает запрос в ERP (без файлика)

Возвращает структура (внутри "ПБЗ", "Сборка") - тип строки

<details>
  <summary>Код</summary>


          	Если нрег(НСтр(СтрокаСоединенияИнформационнойБазы(), "Ref")) = "stavtzev_ev"  тогда 

            		БазаЕРП = "Stavtzev_erp";
          			#Область Обмен_баз
          			//ОбменБаз = ОрганизацияОбменаМеждуБазами();  
          			//БазаЕРП = ОбменБаз.БазаЕРП;
          			#КонецОбласти 
          			Соединение = Новый HTTPСоединение("1s-1", 80, "admin","21179");
          			УстановитьПривилегированныйРежим(Истина);	
          			Текст = "/"+БазаЕРП+"/ru/hs/auto_pbz?a="+Номенклатура
          			+"&b="+Количество
          			+"&c="+Строка(Автор)
          			+"&d="+Строка(Дата)
          			+"&e="+Строка(Признак)
          			+"&f="+Врег(Строка(ЗаказКлиента))
          			+"&g="+Строка("")  	// Колво в метрах
          			+"&h="+Строка("")	// Колво в штуках   //если потом понадобятся...
          			+"&j="+Строка("")	// Единица измерения заказанного
          			+"&k="+Строка(Склад)	// Единица измерения заказанного
          			+"&l="+Строка(Комментарий)	// комментарий
          			+"&m="+Строка(idzak);	// idzak
          
          			Запрос = Новый HTTPЗапрос(Текст);
          			Результат = Соединение.Получить(Запрос);					
          			УстановитьПривилегированныйРежим(Ложь);
          			//500 - нет номенклатуры или колво = 0
          			//400 - нет спецификации 
          			//300 - ошибка внутри функции
          			//200 - топчик, возвращает номер и дату ПБЗ
          			Если 		Число(Результат.КодСостояния) = 500 тогда 
          				Удачно = Новый Структура("ПБЗ, Сборка","", "");		
          			ИначеЕсли 	Число(Результат.КодСостояния) = 400 тогда     
          				Удачно = Новый Структура("ПБЗ, Сборка","", "");		
          			ИначеЕсли 	Число(Результат.КодСостояния) = 300 тогда
          				Удачно = Новый Структура("ПБЗ, Сборка","", "");		
          			ИначеЕсли 	Число(Результат.КодСостояния) = 200 тогда
          				ПБЗ = СтрЗаменить(Результат.Заголовки.Получить("PBZ"),"?"," ");    
          				ПБЗ = "Производство без заказа "+ Лев(ПБЗ,11)+" от " + Сред(ПБЗ,13);
          				ПБЗ = ?(СтрЗаменить(ПБЗ,"Производство без заказа  от ","")="","",ПБЗ);
          				Сборка= СтрЗаменить(Результат.Заголовки.Получить("SBORKA"),"?"," ");
          				Сборка = "Сборка товаров "+ Лев(Сборка,11)+" от " + Сред(Сборка,13);
          				Сборка = ?(СтрЗаменить(Сборка,"Сборка товаров  от ","")="","",Сборка);
          				Удачно = Новый Структура("ПБЗ, Сборка",ПБЗ, Сборка);
          			Иначе
          				Удачно = Новый Структура("ПБЗ, Сборка","", "");		
          			КонецЕсли;          
          			Возврат Удачно
          	КонецЕсли;
          КонецФункции

  
</details>
