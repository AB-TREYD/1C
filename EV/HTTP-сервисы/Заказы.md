## Функция zakGET(Запрос)
<details>
  <summary> Код </summary>

    
        Ответ = Новый HTTPСервисОтвет(200);
        
      	Ответ.Заголовки.Вставить("Content-type","text/xml; charset=utf-8");
      	XMLФайл = Новый ЧтениеXML;
      	XMLФайл.ОткрытьФайл("\\192.168.99.2\obmen\test2.xml");			
      	Пока XMLФайл.Прочитать() Цикл
      		Если XMLФайл.Имя <> "СтрокаСостава" Тогда 
      			НазваниеФайла = СтрЗаменить(XMLФайл.Имя, "__", "/");
      		КонецЕсли;
      		Если XMLФайл.ТипУзла = ТипУзлаXML.НачалоЭлемента и XMLФайл.Имя = "СтрокаСостава" и СтрНайти(НазваниеФайла, Запрос.ПараметрыЗапроса.Получить("f")) > 0 Тогда							
      			ПараметрыПоЗаказуИзERP = ФормированиеСтруктуры(XMLФайл);			
      		КонецЕсли;					
      	КонецЦикла;	
      	XMLФайл.Закрыть();
      	Если СтрНайти(НРег(ПараметрыПоЗаказуИзERP.Заказ), "шина") 
      		ИЛИ СтрНайти(НРег(ПараметрыПоЗаказуИзERP.Заказ), "пруток") 
      		ИЛИ СтрНайти(НРег(ПараметрыПоЗаказуИзERP.Заказ), "катанка")Тогда
      		рез = ЕРПОбмен.СоздатьЗаказНаЦПМ(ПараметрыПоЗаказуИзERP);	
      	Иначе
      		рез = ЕРПОбмен.СоздатьЗаказ(ПараметрыПоЗаказуИзERP);  	
      	КонецЕсли;
      	Ответ.Заголовки.Вставить("IDzak",рез);                         
      	Возврат Ответ;


</details>

## Функция ФормированиеСтруктуры(XMLФайл) 



<details>
  <summary>Код</summary>

  
   
       Номенклатура 			= 	XMLФайл.ЗначениеАтрибута(0);
    	ЕдиницаИзмерения 	=		XMLФайл.ЗначениеАтрибута(8); 	
    	
    	Если не ЕдиницаИзмерения = Неопределено 
    		и  (Нрег(сокрЛП(ЕдиницаИзмерения)) = "кг" 
    		или Нрег(сокрЛП(ЕдиницаИзмерения)) = "км" 
    		или Нрег(сокрЛП(ЕдиницаИзмерения)) = "шт" 
    		или Нрег(сокрЛП(ЕдиницаИзмерения)) = "м") Тогда 	
    		ЕдиницаИзмерения = Перечисления.ЕдиницаИзмеренияЗаказа[СокрЛП(ЕдиницаИзмерения)];	
    	Иначе
    		ЕдиницаИзмерения = Перечисления.ЕдиницаИзмеренияЗаказа.ПустаяСсылка();	
    	КонецЕсли;
    	
    	Если Строка(ЕдиницаИзмерения) = "" Тогда
    		Если СтрНайти(Нрег(Номенклатура),"(кг)") > 0 Тогда
    			
    			ЕдиницаИзмерения = Перечисления.ЕдиницаИзмеренияЗаказа.Кг;
    			Номенклатура     = СтрЗаменить(Номенклатура,"(Кг)","");
    			
    		ИначеЕсли СтрНайти(Нрег(Номенклатура),"(шт)")>0 Тогда 
    			
    			ЕдиницаИзмерения = Перечисления.ЕдиницаИзмеренияЗаказа.Шт;
    			Номенклатура     = СтрЗаменить(Номенклатура,"(Шт)",""); 
    			
    		Иначе 	
    			ЕдиницаИзмерения = Перечисления.ЕдиницаИзмеренияЗаказа.Км;
    		КонецЕсли; 
    	КонецЕсли;                                                 
    	  
    	//-23,08,23 Власов
    	              
    	Структ = Новый Структура;
    	Структ.Вставить("Заказ", Номенклатура);
    	Структ.Вставить("Марка",                  XMLФайл.ЗначениеАтрибута(15));   
    	Структ.Вставить("ЕдиницаИзмеренияЗаказа", ЕдиницаИзмерения); // Кг,Шт,Км      
    	Структ.Вставить("КоличествоЖил",          ?(XMLФайл.ЗначениеАтрибута(16)="",0,XMLФайл.ЗначениеАтрибута(16)));
    	Структ.Вставить("Сечение",                ?(XMLФайл.ЗначениеАтрибута(17)="",0,XMLФайл.ЗначениеАтрибута(17))); 	
    	Тип = СтрЗаменить(XMLФайл.ЗначениеАтрибута(14), " ", "");
    	Структ.Вставить("Тип",                    ?(ПустаяСтрока(Тип), Перечисления.ТипПродукции.ПустаяСсылка(), Перечисления.ТипПродукции[Тип])); //+09,11,22
    	Структ.Вставить("СечениеЭкрана",          XMLФайл.ЗначениеАтрибута(22));
    	Структ.Вставить("Исполнение",             XMLФайл.ЗначениеАтрибута(19));
    	Структ.Вставить("npe",                    XMLФайл.ЗначениеАтрибута(21));
    	Структ.Вставить("Напряжение",             XMLФайл.ЗначениеАтрибута(18));
    	Структ.Вставить("ВариантИсполнения",      ?(ПустаяСтрока(XMLФайл.ЗначениеАтрибута(20)), Справочники.ВидИсполнения.ПустаяСсылка(), Справочники.ВидИсполнения.НайтиПоНаименованию(XMLФайл.ЗначениеАтрибута(20))));
    	Структ.Вставить("ПлюсовойКабель",         Булево(?(ПустаяСтрока(XMLФайл.ЗначениеАтрибута(24)), 0, XMLФайл.ЗначениеАтрибута(24))));
    	Структ.Вставить("КоличествоЖилПлюсовой",  XMLФайл.ЗначениеАтрибута(26));
    	Структ.Вставить("СечениеПлюсовой",        XMLФайл.ЗначениеАтрибута(27));
    	Структ.Вставить("Комментарий",            XMLФайл.ЗначениеАтрибута(5));
    	Структ.Вставить("Примечание",             XMLФайл.ЗначениеАтрибута(6));
    	Структ.Вставить("Намотка",                XMLФайл.ЗначениеАтрибута(7));
    	
    	Структ.Вставить("ИсполнениеЖилыПлюсовой", ?(ПустаяСтрока(XMLФайл.ЗначениеАтрибута(25)),Справочники.ИсполнениеЖилы.ПустаяСсылка(), Справочники.ИсполнениеЖилы.НайтиПоНаименованию(XMLФайл.ЗначениеАтрибута(25))));
    	Структ.Вставить("ИсполнениеЖилы",         ?(Структ.Исполнение<>"",Справочники.ИсполнениеЖилы.НайтиПоНаименованию(Структ.Исполнение),Справочники.ИсполнениеЖилы.ПустаяСсылка()));
    	Структ.Вставить("NPE",                    ?(Структ.NPE<>"",Справочники.СправочникNPE.НайтиПоНаименованию(Структ.NPE),Справочники.СправочникNPE.ПустаяСсылка()));
    	Структ.Вставить("ПроцентСкидки",          XMLФайл.ЗначениеАтрибута(1));
    	Структ.Вставить("РасширениеМарки",        "");
    	
    	Структ.Вставить("НомерСчёта",                  XMLФайл.ЗначениеАтрибута(2));
    	Структ.Вставить("ДатаВыходаПоЗаказу",           XMLФайл.ЗначениеАтрибута(10));  
    	Структ.Вставить("Толеранс",                     XMLФайл.ЗначениеАтрибута(9));
    	Структ.Вставить("ДобавленИзЕРП",                Истина);
    	Структ.Вставить("КомментНеСтандарт",            XMLФайл.ЗначениеАтрибута(12)); 
    	Структ.Вставить("БулевоНеСтандарт",             XMLФайл.ЗначениеАтрибута(13));
    	Структ.Вставить("ДлинаЗаказа",  XMLФайл.ЗначениеАтрибута(3));
    
    	КоэфКонвертации_и_НоваяДлинаЗаказа = ЕрпОбмен.ПоискКоэфициентаКонвертации(Структ);			
    	ДлинаЗаказа 	= КоэфКонвертации_и_НоваяДлинаЗаказа.ДлинаЗаказа;
    	КоэфКонвертации	= КоэфКонвертации_и_НоваяДлинаЗаказа.КоэфКонвертации;  
    	
    	Структ.Вставить("КоличествоКилометровПоЗаказу", Строка(ДлинаЗаказа));
    	Структ.Вставить("КоэффициентКонвертации", КоэфКонвертации);
    	Структ.Вставить("Менеджер",          XMLФайл.ЗначениеАтрибута(28));
    	Структ.Вставить("Цвет",         	 XMLФайл.ЗначениеАтрибута(20));
    	Возврат Структ;
    	//всего 0-28
    КонецФункции

 
</details>
