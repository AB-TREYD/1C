##  Процедура ОтправкаВ_ERP()

если строка продукции заполнена тогда

Отправляет каждую продукцию в ерп

собирает инфу из документа и отправляет ее в ерп для создания ПБЗ и сборки-разборки

в ответ приходит номер+дата. 

В стр.Наличие приходят **Название док + номер + от + дата**


<details>
  <summary>Код</summary>


      
      	ЭтотОбъект.ОтправитьВERP = Истина;
      	Если ЭтотОбъект.ОтправитьВERP тогда
      		Для каждого стр из Продукция цикл    
      			Если не(Стр.Вес = 0 или Строка(Стр.ДиаметрПродукции) = "" ) и ( Стр.Наличие_ПБЗ_ERP = "" или Стр.Наличие_ПБЗ_ERP = "Нет") тогда				
      				Если нрег(Строка(Стр.ДиаметрПродукции))= "⌀ 8" тогда    
      					КодНоменклатуры = "00000031576";
      				ИначеЕсли нрег(Строка(Стр.ДиаметрПродукции))= "⌀ 125" тогда
      					КодНоменклатуры = "";
      				ИначеЕсли нрег(Строка(Стр.ДиаметрПродукции))= "⌀ 16" тогда
      					КодНоменклатуры = "1-000001020";
      				ИначеЕсли нрег(Строка(Стр.ДиаметрПродукции))= "⌀ 20" тогда
      					КодНоменклатуры = "1--00025268";
      				ИначеЕсли нрег(Строка(Стр.ДиаметрПродукции))= "⌀ 25" тогда
      					КодНоменклатуры = "00000047177";
      				КонецЕсли;
      				Автор= ЭтотОбъект.Мастер;
      				Дата= ЭтотОбъект.Дата;
      				Признак = "БЛ";
      				Количество = Стр.Вес; //кг получается...    
      				Склад = Стр.Склад;
      				Комментарий = Стр.Комментарий;         
      				Idzak = Стр.Idzak;
      				Ответ = ЕрпОбмен.СоздатьПроизводствоБезЗаказа(КодНоменклатуры,Количество,Автор,Дата,Признак,,Склад,Комментарий,Idzak);
      				Стр.Наличие_ПБЗ_ERP 	= Ответ.ПБЗ;
      				Стр.Наличие_Сборки_ERP  = Ответ.Сборка;
      			КонецЕсли;
      		КонецЦикла;   
      
      	КонецЕсли;
      
      КонецПроцедуры
      
</details>

## Процедура ПередУдалением(Отказ)

запрет на удаление НЕ админу

<details>
  <summary>Код</summary>
        
        	Отказ = не РольДоступна("Администратор");  
        	Если  не РольДоступна("Администратор") тогда Сообщить("Вы не можете удалить данный документ"); КонецЕсли;	
        КонецПроцедуры
        
</details>

## Процедура ПередЗаписью(Отказ, РежимЗаписи, РежимПроведения)


<details>
  <summary>Код</summary>

          	Если РежимЗаписи = РежимЗаписиДокумента.Проведение и ЭтотОбъект.ТолькоПросмотрПереключатель тогда
          		ОтправкаВ_ERP();
          	КонецЕсли;
          КонецПроцедуры

</details>







