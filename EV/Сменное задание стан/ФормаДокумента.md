


## &НаСервере Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка) 
	
<details>
  <summary>Код</summary>
    
        ////Объект.Дата=ТекущаяДата();    	  
        ////Объект.День=Истина;
    	  ////Объект.Ночь=Ложь;  
    	  ////ДобавитьСтрокиВТаблицу(Объект.Плавильщики,6);
    	  ////ДобавитьСтрокиВТаблицу(Объект.ВолочильныйСтан,12);  
    	  ////  
    	  
    	  
    	  
    	  
    	  Элементы.ВолочильныйСтанДокумент_в_ERP.ТолькоПросмотр = не РольДоступна("Администратор");	  
    	  Элементы.ТолькоПросмотрПереключатель.Видимость = РольДоступна("Администратор");
    	  //Если Объект.Проведен тогда 
    	  //    ТолькоПросмотрПереключатель = истина;
    	  //    ВключитьТолькоПросмотр(ЭтаФорма.ТолькоПросмотрПереключатель);	
    	  //КонецЕсли;
    
    КонецПроцедуры


</details>


## &НаКлиенте Процедура ДеньПриИзменении(Элемент)
<details>
  <summary>Код</summary>
      	
        Если Объект.День=Истина тогда
      		Объект.Ночь=Ложь;
      	Иначе Объект.Ночь=Истина;
      	КонецЕсли;
      КонецПроцедуры

  
</details>

## &НаКлиенте Процедура НочьПриИзменении(Элемент)
<details>
  <summary>Код</summary>


      Если Объект.Ночь=Истина тогда
    		Объект.День=Ложь;
    	Иначе Объект.День=Истина;
    	КонецЕсли;	
    КонецПроцедуры

</details>

## Процедура ДобавитьСтрокиВТаблицу(Таблица,КоличествоСтрок)

<details>
  <summary>Код</summary>

    	Для кол=1 по КоличествоСтрок цикл
    		НоваяСтрока=Таблица.Добавить();		
    	КонецЦикла;	
    КонецПроцедуры

</details>

## &НаКлиенте Процедура Заполнить(Команда)

<details>
  <summary>Код</summary>

        	Для каждого СтрокаТЧ из Объект.Изготовлено цикл 
        		КоличествоМ=0;
        		Отбор=НоВый Структура();
        		Отбор.Вставить("Размер", СтрокаТЧ.Размер);
        		НайденныеСтроки=Объект.ВолочильныйСтан.НайтиСтроки(Отбор);
        		Если НайденныеСтроки.Количество()>0 тогда
        			Для каждого НоваяСтрока из НайденныеСтроки цикл
        				КоличествоМ=КоличествоМ+Число(НоваяСтрока.СделаноШтук)*Число(НоваяСтрока.ДлинаШтуки);				
        			КонецЦикла;                                                                             
        			Для каждого НоваяСтрока из НайденныеСтроки цикл
        				Объект.ВолочильныйСтан[НоваяСтрока.НомерСтроки-1].ВесГодного=СтрокаТЧ.Масса/КоличествоМ*Объект.ВолочильныйСтан[НоваяСтрока.НомерСтроки-1].СделаноШтук*Объект.ВолочильныйСтан[НоваяСтрока.НомерСтроки-1].ДлинаШтуки;				
        			КонецЦикла;                                                                             
        
        		КонецЕсли;
        	КонецЦикла;
        	
        	
        	ЭтаФорма.Элементы.Заполнить.ЦветФона= Новый Цвет(255,255,255);
        КонецПроцедуры

</details>

##   &НаКлиенте Процедура ИзготовленоМассаПриИзменении(Элемент)

<details>
  <summary>Код</summary>
    
    	ЭтаФорма.Элементы.Заполнить.ЦветФона= Новый Цвет(0,128,0);
    КонецПроцедуры


</details>

## Функция ПлавильщикиФИОПриИзмененииНаСервере(ФИОСотрудника)

<details>
  <summary>Код</summary>
      
          Запрос = Новый Запрос;
        	Запрос.Текст = 
        		"ВЫБРАТЬ
        		|	СписокСотрудниковИзЕРП.ТабельныйНомер КАК ТабельныйНомер,
        		|	СписокСотрудниковИзЕРП.Наименование КАК Наименование
        		|ИЗ
        		|	Справочник.СписокСотрудниковИзЕРП КАК СписокСотрудниковИзЕРП
        		|ГДЕ
        		|	СписокСотрудниковИзЕРП.Наименование = &Наименование";
        	
        	Запрос.УстановитьПараметр("Наименование", Строка(ФИОСотрудника));
        	
        	РезультатЗапроса = Запрос.Выполнить();
        	
        	ВыборкаДетальныеЗаписи = РезультатЗапроса.Выбрать();
        	
        	Пока ВыборкаДетальныеЗаписи.Следующий() Цикл
        		Табельный=ВыборкаДетальныеЗаписи.ТабельныйНомер;
        	КонецЦикла;
        	
        	Возврат Табельный
        
        КонецФункции

  
</details>

## &НаКлиенте Процедура ПлавильщикиФИОПриИзменении(Элемент)

<details>
  <summary>Код</summary>

      	ТекущаяСтрока=ЭтотОбъект.ТекущийЭлемент.ТекущиеДанные;
      	ФИОСотрудника=ТекущаяСтрока.ФИО;
      	ТекущаяСтрока.ТабельныйНомер=ПлавильщикиФИОПриИзмененииНаСервере(ФИОСотрудника);  
      КонецПроцедуры

  
</details>

##   &НаКлиенте Процедура ТолькоПросмотрПереключательПриИзменении(Элемент)
<details>
  <summary>Код</summary>
      
      	ВключитьТолькоПросмотр(ЭтаФорма.ТолькоПросмотрПереключатель);
      КонецПроцедуры

</details>

##   Процедура ВключитьТолькоПросмотр(ТолькоПросмотр)

<details>
  <summary>Код</summary>
      
      	ЭтотОбъект.КоманднаяПанель.Доступность	  = не ТолькоПросмотр;
      	Элементы.ВсеЭлементы.ТолькоПросмотр 	  = ТолькоПросмотр;
      КонецПроцедуры

</details>

##   &НаКлиенте Процедура ПередЗаписью(Отказ, ПараметрыЗаписи)
<details>
  <summary>Код</summary>

    
    	Если ПараметрыЗаписи.РежимЗаписи = РежимЗаписиДокумента.Проведение тогда
    		Режим = РежимДиалогаВопрос.ДаНет;  		
    		Ответ = Вопрос("После проведения Вы не сможете изменять этот документ. Провести?", Режим,0);     	
    		Ответ = ?(КодВозвратаДиалога.Да=Ответ,истина,ложь);  
    		Если Ответ тогда		
    			ВключитьТолькоПросмотр(Истина);	 
    			ТолькоПросмотрПереключатель = истина;
    		Иначе
    			Отказ = не Ответ;
    		КонецЕсли;
    	КонецЕсли;
    КонецПроцедуры

</details>


