# Описание
При записи заказа на производство идёт подтягивание по номенклатуре, количеству упаковок IDZak-а в соответствующую позицию заказа клиента
## Ответственный
Минайкин Н.М
## Расширения
### ВсёВОдном
#### ЗаказНаПроизводство2_2.МодульОбъекта
###### ВсеВОдномОбработкаПроведения
В этом месте идёт вызов функции ПоместитьIDZakВПозициюЗаказаКлиента(Строки), которая записывает IDZak в заказ клиента
Передаваемые значение:
Строки - строка табличной части продукция 
```
Если строки.IDZak="" тогда  
  Строки.IDZak=СтрЗаменить(Результат.Заголовки.Получить("IDzak"),"?"," ");
  ПоместитьIDZakВПозициюЗаказаКлиента(Строки);
КонецЕсли;
```
### Контроль продукции
#### КП.МодульОбъекта
###### ПередЗаписью
Переделал механизм подтягивание длины намотки, вначале ищем по текущей позиции, позицию в заказе на производство а далее по IDZak находим эту позицию в заказе клиента
```
	НомерСтроки = СтрРазделить(Код, "/"); 
	
	Запрос = Новый Запрос;
	Запрос.Текст = 
		"ВЫБРАТЬ
		|	ЗаказНаПроизводство2_2.Ссылка КАК Ссылка,
		|	ЗаказНаПроизводство2_2.ДокументОснование КАК ДокументОснование,
		|	ЗаказНаПроизводство2_2.Продукция.(
		|		IDZak КАК IDZak
		|	) КАК Продукция
		|ИЗ
		|	Документ.ЗаказНаПроизводство2_2 КАК ЗаказНаПроизводство2_2
		|ГДЕ
		|	ЗаказНаПроизводство2_2.ДокументОснование = &ДокументОснование";
	
	Запрос.УстановитьПараметр("ДокументОснование", ЗаказКлиента);
	
	РезультатЗапроса = Запрос.Выполнить();
	
	ВыборкаДетальныеЗаписи = РезультатЗапроса.Выбрать();
	
	Пока ВыборкаДетальныеЗаписи.Следующий() Цикл
		
		IDZak = ВыборкаДетальныеЗаписи.Ссылка.Продукция[Число(НомерСтроки[1]) - 1].IDZak;
		
		Отбор = Новый Структура();
		Отбор.Вставить("IDZak", IDZak);
		
		НайденнаяСтрока = ЗаказКлиента.Товары.НайтиСтроки(Отбор);
		
		Попытка
			Если НайденнаяСтрока.Количество() = 0 Тогда
				ДлинаНамотки = ЗаказКлиента.Товары[Число(НомерСтроки[1]) - 1].КоличествоУпаковок;
			Иначе 
				ДлинаНамотки = НайденнаяСтрока[0].КоличествоУпаковок;
			КонецЕсли;
		Исключение 
			Сообщить("Длинна намотки не подтянулась, обратитесь к администратору");
		КонецПопытки;
		
	КонецЦикла;
```
