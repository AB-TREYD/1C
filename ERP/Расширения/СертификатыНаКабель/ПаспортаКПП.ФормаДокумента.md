# Процедуры 
## ДобавитьГостПриИзменении(Элемент)
Вызывается при активации галочки возле поля ГОСТ. Если галочки не было, то проверяем, есть ли галочка у Объект.ДобаитьТУ. Если там нет галочки, то выбранное поле перво и мы должны добавить в название ГОСТ и перед ним, предлог "по", и в заключении просто добавить ГОСТ. Если же Объект.ДобаитьТУ = истина, то это значит что нажатая галочка вторая, и надо добавить в название и в заключение ГОСТ, с запятой перед ним. А если галочка уже была включена и мы ее убираем, то надо удалять из названия и заключения любые варианты написания ("по" или ",") ГОСТа.


<details>
	<summary>Код</summary>
 
```
Если Объект.ДобавитьГОСТ тогда
		Если Объект.ГОСТ <> "" тогда
			Если не Объект.ДобавитьТУ тогда 
				ГОСТТУ(Ложь,Объект.ГОСТ);	
			Иначе
				ГОСТТУ(Истина,Объект.ГОСТ);
			КонецЕсли;
		КонецЕсли;
	Иначе 
		УбратьНадпись(Объект.ГОСТ);	
	КонецЕсли;	

```
</details>


## ДобавитьТУПриИзменении(Элемент)
Вызывается при активации галочки возле поля ТУ. Если галочки не было, то проверяем, есть ли галочка у Объект.ДобаитьГОСТ. Если там нет галочки, то выбранное поле перво и мы должны добавить в название ТУ и перед ним, предлог "по", и в заключении просто добавить ТУ. Если же Объект.ДобаитьГОСТ = истина, то это значит что нажатая галочка вторая, и надо добавить в название и в заключение ТУ, с запятой перед ним. А если галочка уже была включена и мы ее убираем, то надо удалять из названия и заключения любые варианты написания ("по" или ",") ТУ.


<details>
	<summary>Код</summary>
 
```
	Если Объект.ДобавитьТУ тогда
		Если Объект.ТУ <> "" тогда
			Если не Объект.ДобавитьГОСТ тогда 
				ГОСТТУ(Ложь,Объект.ТУ);	
			Иначе
				ГОСТТУ(Истина,Объект.ТУ);
			КонецЕсли;
		КонецЕсли;  
	Иначе 
		УбратьНадпись(Объект.ТУ);	
	КонецЕсли;

```
</details>


## ГОСТТУ(ЕстьДругой, Строка)
Вызывается из ДобавитьГостПриИзменении(Элемент) и ДобавитьТУПриИзменении(Элемент). Анализирует, является ли текущая галка первой нажатой или нет и в зависимости от этого отрабатывает логика с предлогом "по" или ",".


<details>
	<summary>Код</summary>
 
```
	Если не ЕстьДругой тогда
		Объект.Название = Объект.Название + " по " + Строка;
		Объект.Заключение = Объект.Заключение + " " + Строка;
	Иначе
		Объект.Название = Объект.Название + ", " + Строка;
		Объект.Заключение = Объект.Заключение+ ", " + Строка;
	КонецЕсли;

```
</details>


## УбратьНадпись(Строка)
Вызывается из ДобавитьГостПриИзменении(Элемент) и ДобавитьТУПриИзменении(Элемент) если галочку убираем. Отрабатывает логика с удалением ГОСТА или ТУ с "по" или "," из Названия и Заключения.


<details>
	<summary>Код</summary>
 
```
	Если не ЕстьДругой тогда
		Объект.Название = Объект.Название + " по " + Строка;
		Объект.Заключение = Объект.Заключение + " " + Строка;
	Иначе
		Объект.Название = Объект.Название + ", " + Строка;
		Объект.Заключение = Объект.Заключение+ ", " + Строка;
	КонецЕсли;

```
</details>


## ОпределитьГОСТиТУ()
Вызывается из НомерСчетаПриИзменении(Элемент) и ПриСозданииНаСервере(Отказ, СтандартнаяОбработка). При изменении номера счета, определяется МаркаПоНоменклатуре. По ней, можно найти ГОСТ и ТУ для данной номенклатуры. Так же требуется узнать НомерФормы что бы определить организацию в номенклатуре.
Заполняем ГОСТ и ТУ на форме.

<details>
	<summary>Код</summary>
 
```
	Если Число(Объект.НомерФормы.Код) = 4 или Число(Объект.НомерФормы.Код) = 5 Тогда
		Организация = ПредопределенноеЗначение("Перечисление.Организации.Еврокабель");
	ИначеЕсли Число(Объект.НомерФормы.Код) >= 6 или Число(Объект.НомерФормы.Код) <= 18 Тогда
		Организация = ПредопределенноеЗначение("Перечисление.Организации.КЗЭК");
	ИначеЕсли Число(Объект.НомерФормы.Код) = 19 или Число(Объект.НомерФормы.Код) = 20 Тогда
		Организация = ПредопределенноеЗначение("Перечисление.Организации.Спектр");
	КонецЕсли;	
	ТЧ = Объект.МаркаПоНоменклатуре.Родитель.Сертификаты;
	НайденнаяСтрока = ТЧ.Найти(Организация,"Организация");
	
	Если НайденнаяСтрока <> Неопределено тогда 
		Объект.ГОСТ = НайденнаяСтрока.СсылкаНаСертификатГОСТ.Наименование;
		Объект.ТУ = НайденнаяСтрока.СсылкаНаСертификатТУ.Наименование;
	КонецЕсли;

```
</details>



