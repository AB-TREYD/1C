# Процедуры

## Процедура ДобавитьНаличиеНаСкладе(Команда)
Открывает форму "ФормаДобавления".

```
Оповещение = Новый ОписаниеОповещения("ОбновитьЭлементФормы", ЭтаФорма);
ОткрытьФорму("Документ.УчетОтработанныхРанееТМЦ.Форма.ФормаДобавления",,,,,,Оповещение,РежимОткрытияОкнаФормы.Независимый);
```

## Процедура ОбновитьЭлементФормы(Результат, ДополнительныеПараметры) Экспорт
Обновляет сведения об остатках на складе после добавления товаров с помощью кнопки "Добавить наличие на складе". 

```
Элементы.ДанныеРегистра.Обновить();
```

## Процедура Обновить(Команда)
Обновляет динамические списки формы при нажатии на кнопку "Обновление".

```
Элементы.ДанныеРегистра.Обновить();
Элементы.Список.Обновить();
```

## Процедура ДанныеРегистраВыбор(Элемент, ВыбраннаяСтрока, Поле, СтандартнаяОбработка)
Работает при двойном нажатии на строку таблицы "ДанныеРегистра" и добавляет строку с соответствующими значениями в таблицу "ВыборДляПередачи".

<details>
<summary> Код </summary>
    
    Если Элементы.ДанныеРегистра.ТолькоПросмотр = Ложь Тогда
        Если ЗначениеЗаполнено(Элементы.ДанныеРегистра.ТекущиеДанные.СерийныйНомер) 
            И ЭтотОбъект.ВыборДляПередачи.НайтиСтроки(Новый Структура("СерийныйНомер", Элементы.ДанныеРегистра.ТекущиеДанные.СерийныйНомер)).Количество() > 0 Тогда
            Сообщение = Новый СообщениеПользователю;
            Сообщение.Текст = "Номенклатура с таким серийным номером уже выбрана";
            Сообщение.Сообщить();
        Иначе 	
            Передача = ВыборДляПередачи.Добавить(); 
            Передача.Номенклатура = Элементы.ДанныеРегистра.ТекущиеДанные.НаименованиеТовара;
            Передача.Количество = 1;
            Передача.Организация = Элементы.ДанныеРегистра.ТекущиеДанные.Организация;
            Если ЗначениеЗаполнено(Элементы.ДанныеРегистра.ТекущиеДанные.СерийныйНомер) Тогда
                Передача.СерийныйНомер = Элементы.ДанныеРегистра.ТекущиеДанные.СерийныйНомер;
                Передача.РучнойВвод = Ложь;
            Иначе
                Передача.РучнойВвод = Истина;
            КонецЕсли;
            Элементы.Товары.ТолькоПросмотр = Истина;
        КонецЕсли;
    КонецЕсли;	
</details>

## Процедура СписокПриАктивизацииСтроки(Элемент)
При нажатии на строку таблицы "Список" заполняется поле "Исполнитель" и отменяются все действия, если во время перезакрепления пытаются сменить исполнителя таким образом.

<details>
<summary> Код </summary>
    
	Если Элементы.Список.ВыделенныеСтроки.Количество() > 0 И Элементы.Список.ТекущиеДанные.ФИО <> Исполнитель Тогда
		Если Элементы.ДанныеРегистра.ТолькоПросмотр = Ложь Тогда
			Исполнитель = Элементы.Список.ТекущиеДанные.ФИО;
		КонецЕсли;
		Если Элементы.ДанныеРегистра.ТолькоПросмотр = Истина И ЗначениеЗаполнено(Исполнитель) Тогда
			ВыборДляПередачи.Очистить();
			Элементы.ДанныеРегистра.ТолькоПросмотр = Ложь;
			Сообщить("Выбирать позиции для перезакрепления можно только по одному человеку!");
		КонецЕсли;
	КонецЕсли;
</details>

## Процедура Перезакрепить(Команда)
Работает при нажатии на кнопку "Перезакрепить", вызывает серверную процедуру по условию.

<details>
<summary> Код </summary>
	
	Если НЕ Элементы.Список.ТекущиеДанные.ФИО = Исполнитель И ЗначениеЗаполнено(Исполнитель) Тогда
		ПерезакрепитьНаСервере();  
	Иначе
		Сообщить("Для перезакрепления выберите другого исполнителя!");
	КонецЕсли;
</details>



