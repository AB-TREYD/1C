# Процедуры

## Процедура кс_ТендернаяЗащитаПриИзмененииПеред(Элемент)
Процедура предназначена для переключателя тендерная защита. Если включен "запрет пересчета цен," тогда, "Тендерная защита" недоступна. В ином случае, исполняется код, как при нажатии "Запрет пересчета цен", но в самом коде меняется логика с округлением цены за километр (прим. 140,01₽ как 150₽ ) для избавления от лишних копеек.


```
	Если Объект.ТендернаяЗащита и ЗапретПересчетаЦен тогда
		Объект.ТендернаяЗащита = Ложь;
		Сообщить("Тендерная защита недоступна, пока стоит ""Запрет изменения цены""");
	Иначе
		
		ЗапретПересчетаЦен = Истина; 
		
		Для Каждого Строка Из Объект.Товары Цикл
			Строка.ВсеВОдномЦенаЗаКМЗапретПересчета = ЗапретПересчетаЦен;
		КонецЦикла;
		
		ТолькоПросмотрДляЦеныЗаКМ(ЗапретПересчетаЦен); 	
		
		Если ПроверкаЕстьЛиДанныйЗаказВРегистреВыставленияЗапретаПересчетаЦен(Объект.Ссылка, Объект.Контрагент) Тогда 
			ЗапретПересчетаЦен = Ложь 
		КонецЕсли; //Минайкин Н. 1.3.24 Добавил региср и проверку, если в нём есть заказ, значит выставлять запрет пересчёта цен
		
		Если ЗапретПересчетаЦен Тогда
			ПоменятьСогласноЦенеЗаКМ(Ложь); 
			РассчитатьИтоговыеПоказателиЗаказа(ЭтаФорма);
		КонецЕсли;
		
	КонецЕсли;
```
