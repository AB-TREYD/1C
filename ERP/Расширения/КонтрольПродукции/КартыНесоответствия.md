# Формы
## ФормаСписка
### ПриОткрытииНаСервере()
```
	Элементы.ФормаДокументКартыНесоответствияПечатьПоДате.Видимость = Ложь;
	
	Элемент = Список.УсловноеОформление.Элементы.Добавить(); 
	ОтборЭлемента = Элемент.Отбор.Элементы.Добавить(Тип("ЭлементОтбораКомпоновкиДанных"));
	ОтборЭлемента.ЛевоеЗначение = Новый ПолеКомпоновкиДанных("Комментарий");
	ОтборЭлемента.ВидСравнения = ВидСравненияКомпоновкиДанных.Равно;  
	ОтборЭлемента.ПравоеЗначение = "";
	ОтборЭлемента.Использование = Истина;
	
	ОтборЭлемента = Элемент.Отбор.Элементы.Добавить(Тип("ЭлементОтбораКомпоновкиДанных"));
	ОтборЭлемента.ЛевоеЗначение = Новый ПолеКомпоновкиДанных("Дата");
	ОтборЭлемента.ВидСравнения = ВидСравненияКомпоновкиДанных.МеньшеИлиРавно;  
	ОтборЭлемента.ПравоеЗначение = ТекущаяДата()-(3*(24*60*60));
	ОтборЭлемента.Использование = Истина;
	
	Элемент.Оформление.УстановитьЗначениеПараметра("ЦветФона", WebЦвета.Лосось);
```
### ПриОткрытии(Отказ)
```
ПриОткрытииНаСервере();
```
### ДатаСортировкиОтПриИзмененииНаСервере()
```
Элементы.ФормаДокументКартыНесоответствияПечатьПоДате.Видимость = Истина;
```
### ДатаСортировкиОтПриИзменении(Элемент)
```
ДатаСортировкиОтПриИзмененииНаСервере()
```
### ДатаСортировкиДоПриИзмененииНаСервере()
```
Элементы.ФормаДокументКартыНесоответствияПечатьПоДате.Видимость = Истина;
```
### ДатаСортировкиДоПриИзменении(Элемент)
```
ДатаСортировкиДоПриИзмененииНаСервере();
```
### РедкатированиеБК(Команда)
```
РедкатированиеБКНаСервере();
```
### РедкатированиеБКНаСервере()
```
СсылкаНаЭлемент = Элементы.Список.ТекущаяСтрока.Ссылка;
	НазваниеИзменяемогоПараметра = Элементы.Список.ТекущийЭлемент.Имя;
	
	Для каждого Строка из Элементы.Список.ВыделенныеСтроки цикл 
		
		БК = Строка.Ссылка.ПолучитьОбъект();	
		
		Если НазваниеИзменяемогоПараметра = "Дата"          или 
			НазваниеИзменяемогоПараметра  = "Номер" 	    или 
			НазваниеИзменяемогоПараметра  = "НомерСчета"    или 
			НазваниеИзменяемогоПараметра  = "Наименование"  или
			НазваниеИзменяемогоПараметра  = "Происхождение1"  или
			НазваниеИзменяемогоПараметра  = "Контролер"     тогда
			Сообщить("Поле не доступно для редактирования");
			Прервать;
		ИначеЕсли НазваниеИзменяемогоПараметра = "ШифрНСП"  тогда   
			БК[НазваниеИзменяемогоПараметра].Код = ЭтотОбъект.Поправка;
		Иначе	
			БК[НазваниеИзменяемогоПараметра] = ЭтотОбъект.Поправка;
			БК.Записать();
		КонецЕсли;
		
	КонецЦикла;
	
	Элементы.Список.Обновить();
```
## КартаНесоответствия
### ПриСозданииНаСервере(Отказ, СтандартнаяОбработка) 
```
	Если Параметры.Свойство("СсылкаНаКП") Тогда
		КартаПродукции =  Параметры.СсылкаНаКП;
		ЭтаФорма.Объект.ДатаНСП = ТекущаяДата();
		ЭтаФорма.Объект.Наименование = Параметры.НаименованиеПродукции;
		ЭтаФорма.Объект.НомерСчета = Параметры.НомерСчета;
		ЭтаФорма.Объект.Контролер = Параметры.Контролер;
		ЭтаФорма.Объект.ОписаниеКнопка = "Стандартное";
	КонецЕсли;
```
### ОписаниеКнопкаПриИзменении(Элемент)
```
Если Объект.ОписаниеКнопка = "Нестандартное" Тогда 
		Элементы.ШифрНСП.Видимость                = Ложь;
		Элементы.ОписаниеНесоответствия.Видимость = Ложь;		
		Элементы.НеСтандартноеОписание.Видимость  = Истина;
	ИначеЕсли Объект.ОписаниеКнопка = "Стандартное" Тогда
		Элементы.ШифрНСП.Видимость                = Истина;
		Элементы.ОписаниеНесоответствия.Видимость = Истина;		
		Элементы.НеСтандартноеОписание.Видимость  = Ложь;	
	КонецЕсли;
```
### ШифрНСППриИзмененииНаСервере(ШифрНСП, ОписаниеНесоответствия)
```
ОписаниеНесоответствия = ШифрНСП.Наименование;
```
### ШифрНСППриИзменении(Элемент)
```
ШифрНСППриИзмененииНаСервере(Объект.ШифрНСП, Объект.ОписаниеНесоответствия);
```
### ПриОткрытииНаСервере()
```
Элементы.ФормаДокументКартыНесоответствияПечатьПоДате.Видимость = Ложь;	
```
### ПриОткрытии(Отказ)
```
ПриОткрытииНаСервере();
```
### ПередЗаписьюНаСервере(Отказ, ТекущийОбъект, ПараметрыЗаписи)
```
	Если ТекущийОбъект.НомерСчета = "" тогда
		Отказ = Истина;
		Сообщить("Номер счета не должен быть пустым");
	ИначеЕсли ТекущийОбъект.Наименование = "" тогда
		Отказ = Истина;
		Сообщить("Наименование продукции не должно быть пустым");
	ИначеЕсли ТекущийОбъект.КоличествоБрака = "" тогда
		Отказ = Истина;
		Сообщить("Количество брака не должно быть пустым");
	ИначеЕсли ТекущийОбъект.Оборудование = "" тогда
		Отказ = Истина;
		Сообщить("Оборудование не должно быть пустым");
	ИначеЕсли ТекущийОбъект.Происхождение = "" тогда
		Отказ = Истина;
		Сообщить("Происхождение не должно быть пустым");
	ИначеЕсли ТекущийОбъект.Контролер = "" тогда
		Отказ = Истина;
		Сообщить("Поле контролёр ОТК не должно быть пустым");
	КонецЕсли;  
```
